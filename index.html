<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 18 â€“ Deepika â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff4e50; --accent: #ffd700; }
        body { margin: 0; padding: 0; min-height: 100vh; font-family: 'Poppins', sans-serif; text-align: center; color: white; overflow: hidden; background: #1a0a1a; transition: background 2s; }
        .hidden { display: none !important; }
        .full-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; padding: 20px; box-sizing: border-box; }

        /* Backgrounds */
        .bg-dark { background: linear-gradient(135deg, #1a0a1a, #2d0b2e); }
        .bg-romantic { background: linear-gradient(135deg, #ff9a9e, #fad0c4); color: #4a144d; }
        #heart-particles { position: fixed; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 1; opacity: 0; transition: 2s; }

        /* Typography */
        .glow-title { font-family: 'Playfair Display'; font-size: 3.5rem; color: var(--accent); text-shadow: 0 0 15px rgba(255,215,0,0.6); margin-bottom: 20px; }
        .handwritten { font-family: 'Caveat'; font-size: 1.8rem; }

        /* Buttons & Inputs */
        .btn { background: white; color: #4a144d; border: none; padding: 15px 35px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); margin: 10px; font-family: 'Poppins'; }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent); }
        input { padding: 12px; border-radius: 10px; border: 2px solid var(--accent); text-align: center; width: 250px; margin: 10px; outline: none; }

        /* Firecrackers */
        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }

        /* 3D Balloons */
        .balloon { position: absolute; bottom: -100px; width: 50px; height: 70px; border-radius: 50%; animation: floatUp 10s linear infinite; opacity: 0.8; z-index: 2; }
        @keyframes floatUp { to { transform: translateY(-120vh) translateX(50px); } }

        /* Slideshow */
        .slide-img { max-width: 85%; max-height: 55vh; border-radius: 20px; border: 8px solid white; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .caption { font-family: 'Caveat'; font-size: 2rem; color: var(--accent); margin-top: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); }

        /* Interaction Icons */
        .icon-hub { display: flex; justify-content: center; gap: 40px; margin-top: 30px; z-index: 10; position: relative; }
        .icon-box { cursor: pointer; transition: 0.3s; }
        .icon-box:hover { transform: translateY(-10px); }
        .icon-symbol { font-size: 4rem; display: block; filter: drop-shadow(0 0 10px gold); }

        /* Overlays */
        #contentOverlay { background: rgba(0,0,0,0.95); z-index: 5000; }
        .content-card { background: white; color: #333; padding: 40px; border-radius: 20px; width: 85%; max-width: 600px; max-height: 80vh; overflow-y: auto; text-align: left; }
    </style>
</head>
<body class="bg-dark">

    <canvas id="fireworks-canvas"></canvas>
    <div id="heart-particles"></div>

    <audio id="quizMusic" loop><source src="quiz.m4a" type="audio/mpeg"></audio>
    <audio id="memoriesMusic" loop><source src="memories.m4a" type="audio/mpeg"></audio>
    <audio id="mainMusic" loop><source src="main.m4a" type="audio/mpeg"></audio>

    <div id="startStage" class="full-screen">
        <h1 class="glow-title">Chapter 18</h1>
        <button class="btn" onclick="initExperience()">Open Your World âœ¨</button>
    </div>

    <div id="loungeStage" class="full-screen hidden">
        <h1 class="glow-title">Wait for the Magic...</h1>
        <div id="timer" style="font-size: 4rem; font-weight: bold; color: var(--accent);">00:00:00</div>
        <p id="patienceMsg" style="height: 20px; color: #ff85a2;"></p>
        <button class="btn" onclick="checkPatience()">Verify & Enter ğŸ”“</button>
    </div>

    <div id="cipherStage" class="full-screen hidden">
        <div style="background: rgba(0,0,0,0.6); padding: 40px; border-radius: 30px; border: 2px solid var(--accent); backdrop-filter: blur(10px);">
            <h2 class="glow-title" style="font-size: 2rem;">ğŸ”“ The Cipher</h2>
            <p style="letter-spacing: 3px; border: 1px dashed white; padding: 20px; font-weight: bold;">
                23-8-15 &nbsp; 9-19 &nbsp; 25-15-21-18 <br> 19-15-21-12-13-1-20-5 ?
            </p>
            <input type="text" id="cipherInput" placeholder="ANSWER IN CAPS...">
            <br><button class="btn" onclick="verifyCipher()">Unlock ğŸ’–</button>
        </div>
    </div>

    <div id="successStage" class="full-screen hidden">
        <h1 class="glow-title" style="font-size: 4rem;">Correct! âœ…</h1>
        <p class="handwritten">Welcome to your 18th Chapter, My Love.</p>
    </div>

    <div id="menuStage" class="full-screen hidden">
        <h2 class="glow-title">Select a Memory Path</h2>
        <button class="btn" onclick="startSlideshow(1)">âœ¨ Classic Beauty</button>
        <button class="btn" onclick="showLock()">ğŸ˜œ Little Miss Dramebaaz</button>
        <button class="btn" onclick="startSlideshow(3)">ğŸ‘©â€â¤ï¸â€ğŸ‘¨ Soulmate Saga</button>
        
        <div id="passLock" class="hidden">
            <input type="password" id="secretPass" placeholder="Enter Secret Code...">
            <br><button class="btn" onclick="verifySecret()">Unlock Folder ğŸ”“</button>
        </div>
    </div>

    <div id="slideshowStage" class="full-screen hidden" style="background: black;">
        <img id="slideImg" class="slide-img" src="">
        <div id="caption" class="caption"></div>
        <button class="btn" onclick="nextPhoto()">Next Memory â”</button>
    </div>

    <div id="mainPage" class="full-screen hidden">
        <h1 class="glow-title" id="mainTitle">MY LOVE TURNS 18</h1>
        
        <div class="icon-hub">
            <div class="icon-box" onclick="showOverlay('poems')">
                <span class="icon-symbol">ğŸ“œ</span>
                <span style="font-weight: bold;">Verses For You</span>
            </div>
            <div class="icon-box" onclick="showOverlay('letter')">
                <span class="icon-symbol">ğŸ’Œ</span>
                <span style="font-weight: bold;">My Heart</span>
            </div>
        </div>

        <div id="customMsg" style="margin-top: 40px; font-style: italic; opacity: 0.8;">
            (Space for your final message later)
        </div>
    </div>

    <div id="contentOverlay" class="full-screen hidden" onclick="hideOverlay()">
        <div class="content-card" onclick="event.stopPropagation()">
            <div id="overlayBody"></div>
            <center><button class="btn" onclick="hideOverlay()" style="background: var(--primary); color: white;">Close</button></center>
        </div>
    </div>

    <script>
        let targetDate;
        let isReady = false;
        let currentSection = 0, currentIdx = 0;
        let seen = {1:false, 2:false, 3:false};

        const data = {
            1: [{img:"Deepika1.jpg", m:"Journey begins ğŸŒ±"}, {img:"Deepika2.jpg", m:"Favorite smile ğŸ˜ŒğŸ’•"}, {img:"Deepika3.jpg", m:"Elegant âœ¨"}, {img:"Deepika4.jpg", m:"You are mine ğŸ¤«â¤ï¸"}, {img:"Deepika5.jpg", m:"Doraemon ğŸ±â€ğŸš€"}, {img:"Deepika6.jpg", m:"Beautiful ğŸ‘‘"}],
            2: [{img:"Deepika7.jpg", m:"In the moment ğŸ”ğŸ’–"}, {img:"Deepika8.jpg", m:"Stay happy ğŸ˜ŠğŸ§¿"}, {img:"Deepika9.jpg", m:"Thinking... ğŸ¤”ğŸ’­"}, {img:"Deepika10.jpg", m:"Chhota Don ğŸ˜ğŸ‘Š"}, {img:"Deepika11.jpg", m:"My control ğŸª„ğŸ˜ˆ"}, {img:"Deepika.jpg", m:"Princess ğŸ˜˜ğŸ‘‘"}],
            3: [{img:"Deepika12.jpg", m:"Holding you ğŸ¤ğŸ’"}, {img:"Deepika13.jpg", m:"Our future ğŸ‘ï¸ğŸŒ…"}, {img:"Deepika14.jpg", m:"Bluetooth ğŸ“¶ğŸ’"}, {img:"Deepika15.jpg", m:"You and me ğŸ‘©â€â¤ï¸â€ğŸ‘¨"}, {img:"Deepika16.jpg", m:"Deadly duo ğŸ”¥âš”ï¸"}, {img:"Deepika17.jpg", m:"Together â™¾ï¸ğŸŒ¹"}]
        };

        function initExperience() {
            document.getElementById('quizMusic').play();
            document.getElementById('startStage').classList.add('hidden');
            document.getElementById('loungeStage').classList.remove('hidden');
            targetDate = new Date().getTime() + 60000;
            setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const diff = targetDate - new Date().getTime();
            if(diff <= 0) { isReady = true; document.getElementById('timer').innerText = "00:00:00"; }
            else {
                const s = Math.floor((diff % 60000) / 1000);
                document.getElementById('timer').innerText = `00:00:${s < 10 ? '0' : ''}${s}`;
            }
        }

        function checkPatience() {
            if(isReady) { 
                document.getElementById('loungeStage').classList.add('hidden');
                document.getElementById('cipherStage').classList.remove('hidden');
            } else {
                document.getElementById('patienceMsg').innerText = "Good things take time... â¤ï¸";
                setTimeout(() => document.getElementById('patienceMsg').innerText = "", 2000);
            }
        }

        function verifyCipher() {
            if(document.getElementById('cipherInput').value.trim().toUpperCase() === "KARTIK") {
                document.getElementById('cipherStage').classList.add('hidden');
                document.getElementById('successStage').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('successStage').classList.add('hidden');
                    document.getElementById('menuStage').classList.remove('hidden');
                    playTrack('memoriesMusic');
                }, 3000);
            }
        }

        function showLock() { document.getElementById('passLock').classList.toggle('hidden'); }
        function verifySecret() { 
            if(document.getElementById('secretPass').value === "Let's Deep Dive") startSlideshow(2);
            else alert("Wrong code!");
        }

        function startSlideshow(id) {
            currentSection = id; currentIdx = 0; seen[id] = true;
            document.getElementById('menuStage').classList.add('hidden');
            document.getElementById('slideshowStage').classList.remove('hidden');
            updatePhoto();
        }

        function updatePhoto() {
            const p = data[currentSection][currentIdx];
            document.getElementById('slideImg').src = p.img;
            document.getElementById('caption').innerText = p.m;
        }

        function nextPhoto() {
            currentIdx++;
            if(currentIdx < data[currentSection].length) updatePhoto();
            else {
                document.getElementById('slideshowStage').classList.add('hidden');
                if(seen[1] && seen[2] && seen[3]) launchMain();
                else document.getElementById('menuStage').classList.remove('hidden');
            }
        }

        function launchMain() {
            document.body.className = "bg-romantic";
            document.getElementById('heart-particles').style.opacity = "1";
            document.getElementById('mainPage').classList.remove('hidden');
            playTrack('mainMusic');
            createBalloons();
            fireworks();
            setTimeout(() => { document.getElementById('fireworks-canvas').style.display = 'none'; }, 4000);
        }

        function playTrack(id) {
            ['quizMusic', 'memoriesMusic', 'mainMusic'].forEach(mId => {
                let m = document.getElementById(mId);
                if(mId === id) m.play(); else m.pause();
            });
        }

        function createBalloons() {
            for(let i=0; i<15; i++) {
                let b = document.createElement('div');
                b.className = 'balloon';
                b.style.left = Math.random() * 100 + 'vw';
                b.style.background = `hsl(${Math.random() * 360}, 70%, 70%)`;
                b.style.animationDelay = Math.random() * 5 + 's';
                document.body.appendChild(b);
            }
        }

        function fireworks() {
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            // Simple firework visual effect logic...
            ctx.fillStyle = "gold";
            for(let i=0; i<100; i++) ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 3, 3);
        }

        function showOverlay(type) {
            const body = document.getElementById('overlayBody');
            if(type === 'poems') {
                body.innerHTML = `<h2>Verses For You</h2>
                    <div style="white-space:pre-line" class="handwritten"><b>Poem 1: Our Journey</b>\n[Journey Poem Content]\n\n<b>Poem 2: Irreplaceable</b>\n[Poem 2]\n\n<b>Poem 3: Rooting</b>\n[Poem 3]\n\n<b>Poem 4: New Chapter</b>\n[PASTE NEW POEM HERE]</div>`;
            } else {
                body.innerHTML = `<h2>My Heart</h2><div class="handwritten">[PASTE PERSONAL LETTER HERE]</div>`;
            }
            document.getElementById('contentOverlay').classList.remove('hidden');
        }

        function hideOverlay() { document.getElementById('contentOverlay').classList.add('hidden'); }
    </script>
</body>
    </html>
